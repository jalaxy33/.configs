## `just`

[just](https://github.com/casey/just) 是由rust开发的自动化命令编排工具，命令称为 `recipe`，存储在名为 `justfile` 的文件中。语法类似于 `make`，但是更灵活。

推荐理由：
- 命令自动化，语法灵活，可替代 `make`。
- 跨平台，虽然默认只支持sh命令，但是可以通过修改 `shell` 设置来使用不同的shell。
- 支持传入命令参数（可以设定默认值）。

缺点：
- 不支持命令并发执行，`make`可以通过`-j`指定并发线程数。

教程视频：
- [我再也不会写 Makefile 了 | Dreams of Code](https://www.bilibili.com/video/BV1Pm6xBmE57/)


### 常见用法

- 初始化，自动创建 `justfile`：
    ```sh
    just --init
    ```

    这个文件的内容：
    ```justfile
    # https://just.systems

    default:
        echo 'Hello, world!'
    ```

- 查看所有 recipe：
    ```sh
    just --list
    ```
    显示：
    ```sh
    Available recipes:
        default
    ```
- 运行指定 recipe：
    ```sh
    just default
    ```

- 传入命令行参数
    ```justfile
    # to是参数名
    hello name="world":
        echo "hello {{name}}"
    ```
    命令：
    ```sh
    just hello tom  # 打印"hello tom"
    just hello  # 打印默认的"hello world"
    ```

- 使用变量：
    - 使用环境变量：语法是 `${VAR}`
    - 定义/导出环境变量：`export User := "Tom"`
    - 定义局部变量：`name := "Tom"`
        - 使用：`{{name}}`

- 导入 `.env` 文件
    ```
    # 默认不启用，需要声明
    set dotenv-load

    # 还可以指定 .env 文件路径
    set dotenv-filename := "<path-to-dotenv>"
    ```

- 限定系统平台：

    可以通过设置属性来指定在哪些平台运行

    ```sh
    url := "https://google.com"

    [macos]
    open-landing:
        open {{url}}
    ```



